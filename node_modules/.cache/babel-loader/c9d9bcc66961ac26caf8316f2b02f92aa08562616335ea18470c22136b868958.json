{"ast":null,"code":"import axios from 'axios';\nimport MyPublicacion from './Publicacion.vue';\nexport default {\n  name: 'MyAcordion',\n  components: {\n    MyPublicacion\n  },\n  props: {\n    profileName: {\n      type: String\n    },\n    idPerfil: {\n      type: Number,\n      required: true\n    }\n  },\n  data() {\n    return {\n      subjects: []\n    };\n  },\n  mounted() {\n    this.loadSubjects();\n  },\n  updated(nuevoValor) {},\n  methods: {\n    deletePub() {\n      axios.get({\n        method: 'GET',\n        url: `http://localhost:8080/APIdotshare/archivo/borrar/${this.idpub}`\n      }).then(response => response.data).then(data => {\n        console.log('Archivos:' + data);\n        axios.get({\n          method: 'GET',\n          url: `http://localhost:8080/APIdotshare/publicaciones/borrar/${this.idpub}`\n        }).then(response => {\n          console.log('Publicacion borrada con exito');\n        });\n      });\n    },\n    loadSubjects() {\n      axios({\n        method: 'GET',\n        url: `http://143.47.50.240:80/APIdotshare/asignaturas/${this.idPerfil}`\n      }).then(response => {\n        this.subjects = response.data.map(subject => ({\n          ...subject,\n          open: false,\n          publications: []\n        }));\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    toggle(subject) {\n      if (!subject.publications.length) {\n        axios.get(`http://143.47.50.240:80/APIdotshare/publicaciones/perfil/${subject.idAsignatura}`).then(response => {\n          subject.publications = response.data;\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n      subject.open = !subject.open;\n    }\n  }\n};","map":{"version":3,"names":["axios","MyPublicacion","name","components","props","profileName","type","String","idPerfil","Number","required","data","subjects","mounted","loadSubjects","updated","nuevoValor","methods","deletePub","get","method","url","idpub","then","response","console","log","map","subject","open","publications","catch","error","toggle","length","idAsignatura"],"sources":["C:\\Users\\mario\\OneDrive\\Escritorio\\TFG-DOTSHARE\\TFG-DAM-mainn\\src\\views\\AcordionAsignatura.vue"],"sourcesContent":["<template>\n    <div>\n      <div v-for=\"(subject, index) in subjects\" :key=\"index\">\n        <div class=\"toggleHeader\" @click=\"toggle(subject)\">\n          {{ subject.nombre }}\n        </div>\n        <div class=\"expand row\" v-if=\"subject.open\">\n          <div class=\"col-lg-6 col-xl-4\" v-for=\"(publication, index) in subject.publications\" :key=\"index\">\n            <my-publicacion :idpub=\"publication.idPublicacion\" :profile=\"this.profileName\" :archivos=\"publication.archivoList\" :desc=\"publication.descripcion\"></my-publicacion>\n          </div>\n        </div>\n      </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport MyPublicacion from './Publicacion.vue'\nexport default {\n  name: 'MyAcordion',\n  components: {\n    MyPublicacion\n  },\n  props: {\n    profileName: {\n      type: String\n    },\n    idPerfil: {\n      type: Number,\n      required: true\n    }\n  },\n  data () {\n    return {\n      subjects: []\n    }\n  },\n  mounted () {\n    this.loadSubjects()\n  },\n  updated (nuevoValor) {\n  },\n  methods: {\n    deletePub () {\n      axios.get(\n        {\n          method: 'GET',\n          url: `http://localhost:8080/APIdotshare/archivo/borrar/${this.idpub}`\n        }\n      ).then((response) => response.data)\n        .then(data => {\n          console.log('Archivos:' + data)\n          axios.get(\n            {\n              method: 'GET',\n              url: `http://localhost:8080/APIdotshare/publicaciones/borrar/${this.idpub}`\n            }\n          ).then(response => {\n            console.log('Publicacion borrada con exito')\n          })\n        })\n    },\n    loadSubjects () {\n      axios({\n        method: 'GET',\n        url: `http://143.47.50.240:80/APIdotshare/asignaturas/${this.idPerfil}`\n      })\n        .then(response => {\n          this.subjects = response.data.map(subject => ({\n            ...subject,\n            open: false,\n            publications: []\n          }))\n        })\n        .catch(error => {\n          console.log(error)\n        })\n    },\n    toggle (subject) {\n      if (!subject.publications.length) {\n        axios.get(`http://143.47.50.240:80/APIdotshare/publicaciones/perfil/${subject.idAsignatura}`)\n          .then(response => {\n            subject.publications = response.data\n          })\n          .catch(error => {\n            console.log(error)\n          })\n      }\n      subject.open = !subject.open\n    }\n  }\n}\n</script>\n\n<style scoped>\n.toggleHeader {\n    text-align: left;\n    font-weight: bold;\n    color:white;\n    background-color:#41b883;\n    width: 100%;\n    padding: 0.7em 2em;\n    border-radius: 0.2em;\n    margin: 0.5em 0;\n    cursor: pointer;\n}\n.expand{\n  background:linear-gradient(320deg,rgba(255,255,255,0.2),rgba(52, 72, 94, 0.5));\n  border-radius: 1em;\n  border: solid 1px rgba(255, 255, 255, 0.2);\n  margin: 0;\n  padding: 1em 3em;\n}\n\n</style>\n"],"mappings":"AAgBA,OAAOA,KAAI,MAAO,OAAM;AACxB,OAAOC,aAAY,MAAO,mBAAkB;AAC5C,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,UAAU,EAAE;IACVF;EACF,CAAC;EACDG,KAAK,EAAE;IACLC,WAAW,EAAE;MACXC,IAAI,EAAEC;IACR,CAAC;IACDC,QAAQ,EAAE;MACRF,IAAI,EAAEG,MAAM;MACZC,QAAQ,EAAE;IACZ;EACF,CAAC;EACDC,IAAGA,CAAA,EAAK;IACN,OAAO;MACLC,QAAQ,EAAE;IACZ;EACF,CAAC;EACDC,OAAMA,CAAA,EAAK;IACT,IAAI,CAACC,YAAY,EAAC;EACpB,CAAC;EACDC,OAAMA,CAAGC,UAAU,EAAE,CACrB,CAAC;EACDC,OAAO,EAAE;IACPC,SAAQA,CAAA,EAAK;MACXlB,KAAK,CAACmB,GAAG,CACP;QACEC,MAAM,EAAE,KAAK;QACbC,GAAG,EAAG,oDAAmD,IAAI,CAACC,KAAM;MACtE,EACD,CAACC,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACb,IAAI,EAC/BY,IAAI,CAACZ,IAAG,IAAK;QACZc,OAAO,CAACC,GAAG,CAAC,WAAU,GAAIf,IAAI;QAC9BX,KAAK,CAACmB,GAAG,CACP;UACEC,MAAM,EAAE,KAAK;UACbC,GAAG,EAAG,0DAAyD,IAAI,CAACC,KAAM;QAC5E,EACD,CAACC,IAAI,CAACC,QAAO,IAAK;UACjBC,OAAO,CAACC,GAAG,CAAC,+BAA+B;QAC7C,CAAC;MACH,CAAC;IACL,CAAC;IACDZ,YAAWA,CAAA,EAAK;MACdd,KAAK,CAAC;QACJoB,MAAM,EAAE,KAAK;QACbC,GAAG,EAAG,mDAAkD,IAAI,CAACb,QAAS;MACxE,CAAC,EACEe,IAAI,CAACC,QAAO,IAAK;QAChB,IAAI,CAACZ,QAAO,GAAIY,QAAQ,CAACb,IAAI,CAACgB,GAAG,CAACC,OAAM,KAAM;UAC5C,GAAGA,OAAO;UACVC,IAAI,EAAE,KAAK;UACXC,YAAY,EAAE;QAChB,CAAC,CAAC;MACJ,CAAC,EACAC,KAAK,CAACC,KAAI,IAAK;QACdP,OAAO,CAACC,GAAG,CAACM,KAAK;MACnB,CAAC;IACL,CAAC;IACDC,MAAKA,CAAGL,OAAO,EAAE;MACf,IAAI,CAACA,OAAO,CAACE,YAAY,CAACI,MAAM,EAAE;QAChClC,KAAK,CAACmB,GAAG,CAAE,4DAA2DS,OAAO,CAACO,YAAa,EAAC,EACzFZ,IAAI,CAACC,QAAO,IAAK;UAChBI,OAAO,CAACE,YAAW,GAAIN,QAAQ,CAACb,IAAG;QACrC,CAAC,EACAoB,KAAK,CAACC,KAAI,IAAK;UACdP,OAAO,CAACC,GAAG,CAACM,KAAK;QACnB,CAAC;MACL;MACAJ,OAAO,CAACC,IAAG,GAAI,CAACD,OAAO,CAACC,IAAG;IAC7B;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}