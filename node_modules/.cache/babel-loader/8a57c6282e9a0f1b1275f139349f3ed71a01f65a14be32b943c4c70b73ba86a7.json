{"ast":null,"code":"import http from 'axios';\nimport { storage } from '../vuefire/firebase';\nimport { uploadBytes, getDownloadURL, ref } from 'firebase/storage';\nexport default {\n  name: 'ModalVue',\n  props: {\n    user: {\n      type: String,\n      required: true\n    },\n    idPerfil: {\n      type: Number,\n      required: true\n    }\n  },\n  data() {\n    return {\n      imagen: null,\n      imagenBanner: null,\n      nombre: ''\n    };\n  },\n  mounted() {},\n  methods: {\n    clickImagen(e) {\n      this.imagen = e.target.files[0];\n    },\n    clickBanner(e) {\n      this.imgBanner = e.target.files[0];\n    },\n    publicar() {\n      const imgRef = ref(storage, `perfil/${this.user}/${this.imagen.name}`);\n      console.log(this.idPerfil);\n      uploadBytes(imgRef, this.imagen).then(e => console.log(e)).then(e => console.log(e));\n      return http.post('http://localhost:8080/perfilupdate', {\n        idPerfil: this.idPerfil,\n        nombre: this.nombre,\n        img: `perfil/${this.user}/${this.imagen.name}`,\n        imgBanner: `perfil/${this.user}/${this.imagenBanner.name}`\n      }).then(response => response.data).then(response => console.log(response)).then(this.close()).catch(err => console.log(err));\n    },\n    getImagen() {\n      const imgRef = ref(storage, 'images/laura/c2.png');\n      getDownloadURL(imgRef).then(url => {\n        console.log('emit' + url);\n      }).catch(error => {\n        switch (error.code) {\n          case 'storage/object-not-found':\n            break;\n          case 'storage/unauthorized':\n            break;\n          case 'storage/canceled':\n            break;\n          case 'storage/unknown':\n            break;\n        }\n      });\n    },\n    close() {\n      this.$emit('cierraSetting', false);\n    }\n  }\n};","map":{"version":3,"names":["http","storage","uploadBytes","getDownloadURL","ref","name","props","user","type","String","required","idPerfil","Number","data","imagen","imagenBanner","nombre","mounted","methods","clickImagen","e","target","files","clickBanner","imgBanner","publicar","imgRef","console","log","then","post","img","response","close","catch","err","getImagen","url","error","code","$emit"],"sources":["C:\\Users\\mario\\OneDrive\\Escritorio\\DotShare-TFG\\dotshare\\src\\views\\ModalSetting.vue"],"sourcesContent":["<template>\r\n  <div class=\"modal show\" tabindex=\"-1\" role=\"dialog\">\r\n    <div class=\"modal-dialog\" role=\"document\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\">Settings</h5>\r\n          <button @click=\"close\" type=\"button\" class=\"close\" aria-label=\"Close\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n          </button>\r\n        </div>\r\n        <form @submit.prevent=\"publicar\" enctype=\"multipart/form-data\">\r\n          <div class=\"modal-body\">\r\n            <div class=\"form__input\">\r\n              <p>Nombre: </p>\r\n              <input type=\"text\" v-model=\"nombre\" name=\"descripcion\" />\r\n            </div>\r\n            <div class=\"form__input-file\">\r\n              <p>Imagen Perfil: </p>\r\n              <input @change=\"clickImagen($event)\" type=\"file\" accept=\"application/msword, application/vnd.ms-excel, application/vnd.ms-powerpoint,text/plain, application/pdf, image/*\" />\r\n            </div>\r\n            <div class=\"form__input-file\">\r\n              <p>Banner: </p>\r\n              <input @change=\"clickBanner($event)\" type=\"file\" accept=\"application/msword, application/vnd.ms-excel, application/vnd.ms-powerpoint,text/plain, application/pdf, image/*\" />\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <input type=\"submit\" class=\"btn btn-primary\" value=\"Save Changes\"/>\r\n            <button @click=\"close\" type=\"button\" class=\"btn btn-secondary\">Close</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n  </div>\r\n</div></template>\r\n\r\n<script>\r\nimport http from 'axios'\r\nimport { storage } from '../vuefire/firebase'\r\nimport { uploadBytes, getDownloadURL, ref } from 'firebase/storage'\r\n\r\nexport default {\r\n  name: 'ModalVue',\r\n  props: {\r\n    user: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    idPerfil: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      imagen: null,\r\n      imagenBanner: null,\r\n      nombre: ''\r\n    }\r\n  },\r\n  mounted () {\r\n  },\r\n  methods: {\r\n    clickImagen (e) {\r\n      this.imagen = e.target.files[0]\r\n    },\r\n    clickBanner (e) {\r\n      this.imgBanner = e.target.files[0]\r\n    },\r\n    publicar () {\r\n      const imgRef = ref(storage, `perfil/${this.user}/${this.imagen.name}`)\r\n      console.log(this.idPerfil)\r\n      uploadBytes(imgRef, this.imagen).then(e => console.log(e))\r\n        .then(e => console.log(e))\r\n      return http.post(\r\n        'http://localhost:8080/perfilupdate',\r\n        {\r\n          idPerfil: this.idPerfil,\r\n          nombre: this.nombre,\r\n          img: `perfil/${this.user}/${this.imagen.name}`,\r\n          imgBanner: `perfil/${this.user}/${this.imagenBanner.name}`\r\n        }\r\n      )\r\n        .then((response) => response.data)\r\n        .then(response => console.log(response))\r\n        .then(this.close())\r\n        .catch((err) => console.log(err))\r\n    },\r\n    getImagen () {\r\n      const imgRef = ref(storage, 'images/laura/c2.png')\r\n      getDownloadURL(imgRef)\r\n        .then((url) => {\r\n          console.log('emit' + url)\r\n        })\r\n        .catch((error) => {\r\n          switch (error.code) {\r\n            case 'storage/object-not-found':\r\n              break\r\n            case 'storage/unauthorized':\r\n              break\r\n            case 'storage/canceled':\r\n              break\r\n            case 'storage/unknown':\r\n              break\r\n          }\r\n        })\r\n    },\r\n    close () {\r\n      this.$emit('cierraSetting', false)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.show{\r\n  display: block;\r\n}\r\n.form-select{\r\n  margin: 0 0 1em 0;\r\n}\r\n</style>\r\n"],"mappings":"AAmCA,OAAOA,IAAG,MAAO,OAAM;AACvB,SAASC,OAAM,QAAS,qBAAoB;AAC5C,SAASC,WAAW,EAAEC,cAAc,EAAEC,GAAE,QAAS,kBAAiB;AAElE,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,KAAK,EAAE;IACLC,IAAI,EAAE;MACJC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACZ,CAAC;IACDC,QAAQ,EAAE;MACRH,IAAI,EAAEI,MAAM;MACZF,QAAQ,EAAE;IACZ;EACF,CAAC;EACDG,IAAGA,CAAA,EAAK;IACN,OAAO;MACLC,MAAM,EAAE,IAAI;MACZC,YAAY,EAAE,IAAI;MAClBC,MAAM,EAAE;IACV;EACF,CAAC;EACDC,OAAMA,CAAA,EAAK,CACX,CAAC;EACDC,OAAO,EAAE;IACPC,WAAUA,CAAGC,CAAC,EAAE;MACd,IAAI,CAACN,MAAK,GAAIM,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC;IAChC,CAAC;IACDC,WAAUA,CAAGH,CAAC,EAAE;MACd,IAAI,CAACI,SAAQ,GAAIJ,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC;IACnC,CAAC;IACDG,QAAOA,CAAA,EAAK;MACV,MAAMC,MAAK,GAAItB,GAAG,CAACH,OAAO,EAAG,UAAS,IAAI,CAACM,IAAK,IAAG,IAAI,CAACO,MAAM,CAACT,IAAK,EAAC;MACrEsB,OAAO,CAACC,GAAG,CAAC,IAAI,CAACjB,QAAQ;MACzBT,WAAW,CAACwB,MAAM,EAAE,IAAI,CAACZ,MAAM,CAAC,CAACe,IAAI,CAACT,CAAA,IAAKO,OAAO,CAACC,GAAG,CAACR,CAAC,CAAC,EACtDS,IAAI,CAACT,CAAA,IAAKO,OAAO,CAACC,GAAG,CAACR,CAAC,CAAC;MAC3B,OAAOpB,IAAI,CAAC8B,IAAI,CACd,oCAAoC,EACpC;QACEnB,QAAQ,EAAE,IAAI,CAACA,QAAQ;QACvBK,MAAM,EAAE,IAAI,CAACA,MAAM;QACnBe,GAAG,EAAG,UAAS,IAAI,CAACxB,IAAK,IAAG,IAAI,CAACO,MAAM,CAACT,IAAK,EAAC;QAC9CmB,SAAS,EAAG,UAAS,IAAI,CAACjB,IAAK,IAAG,IAAI,CAACQ,YAAY,CAACV,IAAK;MAC3D,EACF,CACGwB,IAAI,CAAEG,QAAQ,IAAKA,QAAQ,CAACnB,IAAI,EAChCgB,IAAI,CAACG,QAAO,IAAKL,OAAO,CAACC,GAAG,CAACI,QAAQ,CAAC,EACtCH,IAAI,CAAC,IAAI,CAACI,KAAK,EAAE,EACjBC,KAAK,CAAEC,GAAG,IAAKR,OAAO,CAACC,GAAG,CAACO,GAAG,CAAC;IACpC,CAAC;IACDC,SAAQA,CAAA,EAAK;MACX,MAAMV,MAAK,GAAItB,GAAG,CAACH,OAAO,EAAE,qBAAqB;MACjDE,cAAc,CAACuB,MAAM,EAClBG,IAAI,CAAEQ,GAAG,IAAK;QACbV,OAAO,CAACC,GAAG,CAAC,MAAK,GAAIS,GAAG;MAC1B,CAAC,EACAH,KAAK,CAAEI,KAAK,IAAK;QAChB,QAAQA,KAAK,CAACC,IAAI;UAChB,KAAK,0BAA0B;YAC7B;UACF,KAAK,sBAAsB;YACzB;UACF,KAAK,kBAAkB;YACrB;UACF,KAAK,iBAAiB;YACpB;QAAI;MAEV,CAAC;IACL,CAAC;IACDN,KAAIA,CAAA,EAAK;MACP,IAAI,CAACO,KAAK,CAAC,eAAe,EAAE,KAAK;IACnC;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}