{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-c4febf94\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = [\"onClick\"];\nconst _hoisted_2 = {\n  key: 0,\n  class: \"expand row\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_my_publicacion = _resolveComponent(\"my-publicacion\");\n  return _openBlock(), _createElementBlock(\"div\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.subjects, (subject, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index\n    }, [_createElementVNode(\"div\", {\n      class: \"toggleHeader\",\n      onClick: $event => $options.toggle(subject)\n    }, _toDisplayString(subject.nombre), 9 /* TEXT, PROPS */, _hoisted_1), subject.open ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(subject.publications, (publication, index) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        class: \"col-lg-6 col-xl-4\",\n        key: index\n      }, [_createVNode(_component_my_publicacion, {\n        onDeletePubli: _cache[0] || (_cache[0] = $event => $options.deletePub()),\n        idpub: publication.idPublicacion,\n        profile: this.profileName,\n        archivos: publication.archivoList,\n        desc: publication.descripcion\n      }, null, 8 /* PROPS */, [\"idpub\", \"profile\", \"archivos\", \"desc\"])]);\n    }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true)]);\n  }), 128 /* KEYED_FRAGMENT */))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_Fragment","_renderList","$data","subjects","subject","index","key","_createElementVNode","onClick","$event","$options","toggle","nombre","_hoisted_1","open","_hoisted_2","publications","publication","_createVNode","_component_my_publicacion","onDeletePubli","_cache","deletePub","idpub","idPublicacion","profile","profileName","archivos","archivoList","desc","descripcion"],"sources":["C:\\Users\\mario\\OneDrive\\Escritorio\\TFG-DOTSHARE\\TFG-DAM-mainn\\src\\views\\AcordionAsignatura.vue"],"sourcesContent":["<template>\n    <div>\n      <div v-for=\"(subject, index) in subjects\" :key=\"index\">\n        <div class=\"toggleHeader\" @click=\"toggle(subject)\">\n          {{ subject.nombre }}\n        </div>\n        <div class=\"expand row\" v-if=\"subject.open\">\n          <div class=\"col-lg-6 col-xl-4\" v-for=\"(publication, index) in subject.publications\" :key=\"index\">\n            <my-publicacion @deletePubli=\"deletePub()\" :idpub=\"publication.idPublicacion\" :profile=\"this.profileName\" :archivos=\"publication.archivoList\" :desc=\"publication.descripcion\"></my-publicacion>\n          </div>\n        </div>\n      </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport MyPublicacion from './Publicacion.vue'\nexport default {\n  name: 'MyAcordion',\n  components: {\n    MyPublicacion\n  },\n  props: {\n    profileName: {\n      type: String\n    },\n    idPerfil: {\n      type: Number,\n      required: true\n    }\n  },\n  data () {\n    return {\n      subjects: []\n    }\n  },\n  mounted () {\n    this.loadSubjects()\n  },\n  updated (nuevoValor) {\n  },\n  methods: {\n    deletePub () {\n      axios.get(\n        {\n          method: 'GET',\n          url: 'http://localhost:8080/APIdotshare/archivo/borrar/4'\n        }\n      ).then((response) => response.data)\n        .then(data => {\n          console.log('Archivos:' + data)\n          axios.get(\n            {\n              method: 'GET',\n              url: 'http://localhost:8080/APIdotshare/publicaciones/borrar/4'\n            }\n          ).then(response => {\n            console.log('Publicacion borrada con exito')\n          })\n        })\n    },\n    loadSubjects () {\n      axios({\n        method: 'GET',\n        url: `http://143.47.50.240:80/APIdotshare/asignaturas/${this.idPerfil}`\n      })\n        .then(response => {\n          this.subjects = response.data.map(subject => ({\n            ...subject,\n            open: false,\n            publications: []\n          }))\n        })\n        .catch(error => {\n          console.log(error)\n        })\n    },\n    toggle (subject) {\n      if (!subject.publications.length) {\n        axios.get(`http://143.47.50.240:80/APIdotshare/publicaciones/perfil/${subject.idAsignatura}`)\n          .then(response => {\n            subject.publications = response.data\n          })\n          .catch(error => {\n            console.log(error)\n          })\n      }\n      subject.open = !subject.open\n    }\n  }\n}\n</script>\n\n<style scoped>\n.toggleHeader {\n    text-align: left;\n    font-weight: bold;\n    color:white;\n    background-color:#41b883;\n    width: 100%;\n    padding: 0.7em 2em;\n    border-radius: 0.2em;\n    margin: 0.5em 0;\n    cursor: pointer;\n}\n.expand{\n  background:linear-gradient(320deg,rgba(255,255,255,0.2),rgba(52, 72, 94, 0.5));\n  border-radius: 1em;\n  border: solid 1px rgba(255, 255, 255, 0.2);\n  margin: 0;\n  padding: 1em 3em;\n}\n\n</style>\n"],"mappings":";;;;;EAMaA,KAAK,EAAC;;;;uBALfC,mBAAA,CAWM,e,kBAVJA,mBAAA,CASMC,SAAA,QAAAC,WAAA,CAT0BC,KAAA,CAAAC,QAAQ,GAA3BC,OAAO,EAAEC,KAAK;yBAA3BN,mBAAA,CASM;MATqCO,GAAG,EAAED;IAAK,IACnDE,mBAAA,CAEM;MAFDT,KAAK,EAAC,cAAc;MAAEU,OAAK,EAAAC,MAAA,IAAEC,QAAA,CAAAC,MAAM,CAACP,OAAO;wBAC3CA,OAAO,CAACQ,MAAM,wBAAAC,UAAA,GAEWT,OAAO,CAACU,IAAI,I,cAA1Cf,mBAAA,CAIM,OAJNgB,UAIM,I,kBAHJhB,mBAAA,CAEMC,SAAA,QAAAC,WAAA,CAFwDG,OAAO,CAACY,YAAY,GAA3CC,WAAW,EAAEZ,KAAK;2BAAzDN,mBAAA,CAEM;QAFDD,KAAK,EAAC,mBAAmB;QAAuDQ,GAAG,EAAED;UACxFa,YAAA,CAA+LC,yBAAA;QAA9KC,aAAW,EAAAC,MAAA,QAAAA,MAAA,MAAAZ,MAAA,IAAEC,QAAA,CAAAY,SAAS;QAAKC,KAAK,EAAEN,WAAW,CAACO,aAAa;QAAGC,OAAO,OAAOC,WAAW;QAAGC,QAAQ,EAAEV,WAAW,CAACW,WAAW;QAAGC,IAAI,EAAEZ,WAAW,CAACa"},"metadata":{},"sourceType":"module","externalDependencies":[]}