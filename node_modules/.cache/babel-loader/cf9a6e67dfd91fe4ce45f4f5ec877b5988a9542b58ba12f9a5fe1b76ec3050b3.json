{"ast":null,"code":"import http from 'axios';\nimport MyModal from './Modal.vue';\nimport MyAcordion from './AcordionAsignatura.vue';\nimport MyModalSetting from './ModalSetting.vue';\nimport { bus } from '@/event-bus.js';\nimport { storage } from '@/vuefire/firebase';\nimport { ref, getDownloadURL } from '@firebase/storage';\nexport default {\n  name: 'SignUpView',\n  components: {\n    MyModal,\n    MyAcordion,\n    MyModalSetting\n  },\n  props: {\n    id: {\n      type: String,\n      default: '',\n      required: true\n    }\n  },\n  data() {\n    return {\n      img: '',\n      imgBanner: '',\n      perfil: {\n        idPerfil: '',\n        nombre: '',\n        img: '',\n        imgBanner: '',\n        creationDate: ''\n      },\n      publicaciones: [],\n      asignaturas: [],\n      archivos: [],\n      showModal: false,\n      showSetting: false,\n      showImages: false,\n      perfilLoaded: false,\n      updatePublish: false,\n      showButtoms: false\n    };\n  },\n  mounted() {\n    bus.on('actualizarPublicaciones', this.handleActualizaPublicaciones);\n    this.getProfile();\n    this.getPublicaciones();\n    this.checkVisibility();\n  },\n  methods: {\n    checkVisibility() {\n      const user = JSON.parse(sessionStorage.getItem('user'));\n      if (user.nombre === this.id) {\n        this.showButtoms = true;\n      }\n    },\n    follow() {\n      const perfilId = JSON.parse(sessionStorage.getItem('user')).perfil.idPerfil;\n      console.log(perfilId);\n      const seguidoId = parseInt(this.perfil.idPerfil);\n      http.post(`http://localhost:8080/perfil/${perfilId}/seguir/${seguidoId}`).then(response => response.data).then(response => console.log(response));\n    },\n    handleActualizaPublicaciones() {\n      this.updatePublish = !this.updatePublish;\n    },\n    getProfile() {\n      return http({\n        method: 'GET',\n        url: `http://localhost:8080/perfil/${this.id}`\n      }).then(response => response.data).then(perfil => {\n        this.perfil = perfil;\n        // this.perfil.creationDate = this.perfil.creationDate.slice(0, 10)\n        this.perfilLoaded = true;\n        const imgRef = ref(storage, `perfil/${this.id}/${this.perfil.img}`);\n        getDownloadURL(imgRef).then(url => {\n          this.img = url;\n        }).catch(error => console.log(error));\n        const bannerRef = ref(storage, `perfil/${this.id}/${this.perfil.imgBanner}`);\n        getDownloadURL(bannerRef).then(url => {\n          this.imgBanner = url;\n        }).catch(error => console.log(error));\n        this.showImages = true;\n        return http({\n          method: 'GET',\n          url: `http://localhost:8080/asignaturas/${this.perfil.idPerfil}`\n        }).then(response => response.data).then(asignaturas => {\n          this.asignaturas = asignaturas;\n        }).catch(err => console.log(err));\n      }).catch(err => console.log(err));\n    },\n    getPublicaciones() {},\n    dialog() {\n      this.showModal = true;\n    },\n    setting() {\n      this.showSetting = true;\n    },\n    cierra(info) {\n      this.showModal = info;\n    },\n    cierraSetting(info) {\n      this.showSetting = info;\n    }\n  },\n  watch: {}\n};","map":{"version":3,"names":["http","MyModal","MyAcordion","MyModalSetting","bus","storage","ref","getDownloadURL","name","components","props","id","type","String","default","required","data","img","imgBanner","perfil","idPerfil","nombre","creationDate","publicaciones","asignaturas","archivos","showModal","showSetting","showImages","perfilLoaded","updatePublish","showButtoms","mounted","on","handleActualizaPublicaciones","getProfile","getPublicaciones","checkVisibility","methods","user","JSON","parse","sessionStorage","getItem","follow","perfilId","console","log","seguidoId","parseInt","post","then","response","method","url","imgRef","catch","error","bannerRef","err","dialog","setting","cierra","info","cierraSetting","watch"],"sources":["C:\\Users\\mario\\OneDrive\\Escritorio\\DotShare-TFG\\dotshare\\src\\views\\Profile.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <my-modal :idPerfil=\"perfil.idPerfil\" :user=\"id\" @cierra=\"cierra\" v-if=\"showModal\"></my-modal>\r\n    <my-modal-setting :user=\"id\" :idPerfil=\"perfil.idPerfil\" @cierraSetting=\"cierraSetting\" v-if=\"showSetting\"></my-modal-setting>\r\n    <div class=\"profile\">\r\n        <!-- Banner -->\r\n        <div class=\"banner\">\r\n          <img class=\"imgBanner\" v-if=\"showImages\" :src=\"this.imgBanner\"  />\r\n            <div v-if=\"this.showButtoms\" @click=\"setting\" class=\"settings\">\r\n              <img src=\"../assets/setting.png\" />\r\n            </div>\r\n            <div v-if=\"!this.showButtoms\" @click=\"follow\" class=\"follow\">\r\n              <p>Seguir</p>\r\n            </div>\r\n            <div class=\"profile__img\">\r\n              <img class=\"img\" v-if=\"showImages\" :src=\"this.img\"  />\r\n            </div>\r\n        </div>\r\n        <div class=\"underbanner\">\r\n            <p class=\"under__title\">{{ perfil.nombre }}</p>\r\n            <div class=\"under__content row\">\r\n              <div class=\"under__details col-6\">\r\n                <div class=\"under__parts\">\r\n                  <p>Nick:</p>\r\n                  <p>@{{ id }}</p>\r\n                </div>\r\n                <div class=\"under__parts\">\r\n                  <p>Since:</p>\r\n                  <p>{{ perfil.creationDate }}</p>\r\n                </div>\r\n              </div>\r\n              <div class=\"row col-6\">\r\n                <div class=\"infor col-4\">\r\n                  <p>{{ perfil.npublicaciones }}</p>\r\n                </div>\r\n                <div class=\"infor col-4\">\r\n                  <p>{{ perfil.nseguidos }}</p>\r\n                </div>\r\n                <div class=\"infor col-4\">\r\n                  <p>{{ perfil.nseguidores }}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        <div class=\"contenido\">\r\n          <button v-if=\"this.showButtoms\" class=\"addPublicacion\" v-on:click=\"dialog\">+</button>\r\n          <my-acordion :key=\"this.updatePublish\" ref=\"acordeon\" class=\"acordeon\" :profileName=\"this.id\" :idPerfil=\"perfil.idPerfil\" v-if=\"this.perfilLoaded\" ></my-acordion>\r\n        </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport http from 'axios'\r\nimport MyModal from './Modal.vue'\r\nimport MyAcordion from './AcordionAsignatura.vue'\r\nimport MyModalSetting from './ModalSetting.vue'\r\nimport { bus } from '@/event-bus.js'\r\nimport { storage } from '@/vuefire/firebase'\r\nimport { ref, getDownloadURL } from '@firebase/storage'\r\n\r\nexport default {\r\n  name: 'SignUpView',\r\n  components: {\r\n    MyModal,\r\n    MyAcordion,\r\n    MyModalSetting\r\n  },\r\n  props: {\r\n    id: {\r\n      type: String,\r\n      default: '',\r\n      required: true\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      img: '',\r\n      imgBanner: '',\r\n      perfil: {\r\n        idPerfil: '',\r\n        nombre: '',\r\n        img: '',\r\n        imgBanner: '',\r\n        creationDate: ''\r\n      },\r\n      publicaciones: [],\r\n      asignaturas: [],\r\n      archivos: [],\r\n      showModal: false,\r\n      showSetting: false,\r\n      showImages: false,\r\n      perfilLoaded: false,\r\n      updatePublish: false,\r\n      showButtoms: false\r\n    }\r\n  },\r\n  mounted () {\r\n    bus.on('actualizarPublicaciones', this.handleActualizaPublicaciones)\r\n    this.getProfile()\r\n    this.getPublicaciones()\r\n    this.checkVisibility()\r\n  },\r\n  methods: {\r\n    checkVisibility () {\r\n      const user = JSON.parse(sessionStorage.getItem('user'))\r\n      if (user.nombre === this.id) {\r\n        this.showButtoms = true\r\n      }\r\n    },\r\n    follow () {\r\n      const perfilId = JSON.parse(sessionStorage.getItem('user')).perfil.idPerfil\r\n      console.log(perfilId)\r\n      const seguidoId = parseInt(this.perfil.idPerfil)\r\n      http.post(`http://localhost:8080/perfil/${perfilId}/seguir/${seguidoId}`)\r\n        .then((response) => response.data)\r\n        .then(response => console.log(response))\r\n    },\r\n    handleActualizaPublicaciones () {\r\n      this.updatePublish = !this.updatePublish\r\n    },\r\n    getProfile () {\r\n      return http(\r\n        {\r\n          method: 'GET',\r\n          url: `http://localhost:8080/perfil/${this.id}`\r\n        }\r\n      )\r\n        .then((response) => response.data)\r\n        .then(perfil => {\r\n          this.perfil = perfil\r\n          // this.perfil.creationDate = this.perfil.creationDate.slice(0, 10)\r\n          this.perfilLoaded = true\r\n          const imgRef = ref(storage, `perfil/${this.id}/${this.perfil.img}`)\r\n          getDownloadURL(imgRef)\r\n            .then((url) => {\r\n              this.img = url\r\n            })\r\n            .catch((error) => console.log(error))\r\n          const bannerRef = ref(storage, `perfil/${this.id}/${this.perfil.imgBanner}`)\r\n          getDownloadURL(bannerRef)\r\n            .then((url) => {\r\n              this.imgBanner = url\r\n            })\r\n            .catch((error) => console.log(error))\r\n          this.showImages = true\r\n          return http(\r\n            {\r\n              method: 'GET',\r\n              url: `http://localhost:8080/asignaturas/${this.perfil.idPerfil}`\r\n            }\r\n          )\r\n            .then((response) => response.data)\r\n            .then(asignaturas => {\r\n              this.asignaturas = asignaturas\r\n            })\r\n            .catch((err) => console.log(err))\r\n        })\r\n        .catch((err) => console.log(err))\r\n    },\r\n    getPublicaciones () {\r\n    },\r\n    dialog () {\r\n      this.showModal = true\r\n    },\r\n    setting () {\r\n      this.showSetting = true\r\n    },\r\n    cierra (info) {\r\n      this.showModal = info\r\n    },\r\n    cierraSetting (info) {\r\n      this.showSetting = info\r\n    }\r\n  },\r\n  watch: {\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nh1{\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.profile{\r\n    background-color: #41b883;\r\n}\r\n.banner{\r\n    position: relative;\r\n    height: 25vh;\r\n    background-color: black;\r\n}\r\n.underbanner{\r\n    height: 7em;\r\n    background-color: #41b883;\r\n    margin: 0 0 0 16em;\r\n}\r\n.settings{\r\n  background-color: #41b883;\r\n  cursor: pointer;\r\n  position: absolute;\r\n  top: 1em;\r\n  right: 1em;\r\n  width: fit-content;\r\n  padding: 0.25em 0.5em;\r\n  border-radius: 0.5em;\r\n}\r\n.follow{\r\n  background-color: #41b883;\r\n  cursor: pointer;\r\n  position: absolute;\r\n  bottom: 1em;\r\n  right: 1em;\r\n  width: fit-content;\r\n  padding: 0.25em 0.5em;\r\n  border-radius: 0.5em;\r\n}\r\n\r\n.follow p {\r\n  margin: 0;\r\n  font-size: 1.2em;\r\n  font-weight: 600;\r\n  color: white;\r\n}\r\n.profile__img{\r\n    position: absolute;\r\n    background-color: rgba(0,0,0,0);\r\n    width: 100%;\r\n    height: 100%;\r\n    border-radius: 50%;\r\n}\r\n.under__content{\r\n  justify-content:space-between;\r\n  margin: 0;\r\n  padding: 0 1.3em;\r\n}\r\n\r\n.under__parts{\r\n  display: flex;\r\n}\r\n.under__details{\r\n  text-align: left;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.under__parts p{\r\n  padding: 0;\r\n  margin: 0.2em 0;\r\n}\r\n.under__title {\r\n  text-align: left;\r\n  padding: 0.4em 0.5em 0.2em 1em;\r\n  margin: 0;\r\n  color: white;\r\n  font-weight: bold;\r\n  font-size: 20px;\r\n}\r\n.under__parts p:nth-child(1){\r\n  font-weight: bold;\r\n}\r\n.imgBanner{\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: fill;\r\n}\r\n.img {\r\n  border-radius: 50%;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n.contenido{\r\n  min-height: 55vh;\r\n  background-color: #34495E;\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n}\r\n.addPublicacion{\r\n  width: fit-content;\r\n  position:absolute;\r\n  top:1em;\r\n  right: 1em;\r\n  color: white;\r\n  background-color: #41b883 ;\r\n  border: none;\r\n  border-radius: 0.5em;\r\n  padding: 0.5em 1em;\r\n}\r\n.acordeon{\r\n  padding: 2em 12% 0 8%;\r\n}\r\n\r\n.infor{\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n}\r\n\r\n.infor p{\r\n  height: fit-content;\r\n  font-size: 2em;\r\n  padding: 0 0.2em;\r\n  font-weight: 600;\r\n}\r\n@media (min-width: 1px) {\r\n  .profile__img {\r\n    max-width: 180px;\r\n    max-height: 180px;\r\n    left: 32px;\r\n    bottom:-90px;\r\n  }\r\n  .under__title{\r\n    padding-left: 1em;\r\n  }\r\n  .under__content{\r\n    padding-left: 1em;\r\n  }\r\n}\r\n\r\n@media (max-width: 600px) {\r\n  .acordeon {\r\n    padding-right: 18%;\r\n  }\r\n\r\n}\r\n\r\n@media (min-width: 576px) {\r\n  .container {\r\n    max-width: 620px !important;\r\n  }\r\n  .profile__img {\r\n    max-width: 190px;\r\n    max-height: 190px;\r\n    left: 52px;\r\n    bottom:-95px;\r\n  }\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  .container {\r\n    max-width: 790px!important;\r\n  }\r\n}\r\n\r\n@media (min-width: 992px) {\r\n  .container {\r\n    max-width: 900px!important;\r\n  }\r\n}\r\n\r\n@media (min-width: 1200px) {\r\n  .container {\r\n    max-width: 1200px!important;\r\n  }\r\n  .profile__img {\r\n    max-width: 220px;\r\n    max-height: 220px;\r\n    left: 62px;\r\n    bottom:-110px;\r\n  }\r\n  .under__title{\r\n    padding-left: 4em;\r\n  }\r\n  .under__content{\r\n    padding-left: 5em;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"AAqDA,OAAOA,IAAG,MAAO,OAAM;AACvB,OAAOC,OAAM,MAAO,aAAY;AAChC,OAAOC,UAAS,MAAO,0BAAyB;AAChD,OAAOC,cAAa,MAAO,oBAAmB;AAC9C,SAASC,GAAE,QAAS,gBAAe;AACnC,SAASC,OAAM,QAAS,oBAAmB;AAC3C,SAASC,GAAG,EAAEC,cAAa,QAAS,mBAAkB;AAEtD,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,UAAU,EAAE;IACVR,OAAO;IACPC,UAAU;IACVC;EACF,CAAC;EACDO,KAAK,EAAE;IACLC,EAAE,EAAE;MACFC,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE,EAAE;MACXC,QAAQ,EAAE;IACZ;EACF,CAAC;EACDC,IAAGA,CAAA,EAAK;IACN,OAAO;MACLC,GAAG,EAAE,EAAE;MACPC,SAAS,EAAE,EAAE;MACbC,MAAM,EAAE;QACNC,QAAQ,EAAE,EAAE;QACZC,MAAM,EAAE,EAAE;QACVJ,GAAG,EAAE,EAAE;QACPC,SAAS,EAAE,EAAE;QACbI,YAAY,EAAE;MAChB,CAAC;MACDC,aAAa,EAAE,EAAE;MACjBC,WAAW,EAAE,EAAE;MACfC,QAAQ,EAAE,EAAE;MACZC,SAAS,EAAE,KAAK;MAChBC,WAAW,EAAE,KAAK;MAClBC,UAAU,EAAE,KAAK;MACjBC,YAAY,EAAE,KAAK;MACnBC,aAAa,EAAE,KAAK;MACpBC,WAAW,EAAE;IACf;EACF,CAAC;EACDC,OAAMA,CAAA,EAAK;IACT5B,GAAG,CAAC6B,EAAE,CAAC,yBAAyB,EAAE,IAAI,CAACC,4BAA4B;IACnE,IAAI,CAACC,UAAU,EAAC;IAChB,IAAI,CAACC,gBAAgB,EAAC;IACtB,IAAI,CAACC,eAAe,EAAC;EACvB,CAAC;EACDC,OAAO,EAAE;IACPD,eAAcA,CAAA,EAAK;MACjB,MAAME,IAAG,GAAIC,IAAI,CAACC,KAAK,CAACC,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC;MACtD,IAAIJ,IAAI,CAAClB,MAAK,KAAM,IAAI,CAACV,EAAE,EAAE;QAC3B,IAAI,CAACoB,WAAU,GAAI,IAAG;MACxB;IACF,CAAC;IACDa,MAAKA,CAAA,EAAK;MACR,MAAMC,QAAO,GAAIL,IAAI,CAACC,KAAK,CAACC,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAACxB,MAAM,CAACC,QAAO;MAC1E0B,OAAO,CAACC,GAAG,CAACF,QAAQ;MACpB,MAAMG,SAAQ,GAAIC,QAAQ,CAAC,IAAI,CAAC9B,MAAM,CAACC,QAAQ;MAC/CpB,IAAI,CAACkD,IAAI,CAAE,gCAA+BL,QAAS,WAAUG,SAAU,EAAC,EACrEG,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACpC,IAAI,EAChCmC,IAAI,CAACC,QAAO,IAAKN,OAAO,CAACC,GAAG,CAACK,QAAQ,CAAC;IAC3C,CAAC;IACDlB,4BAA2BA,CAAA,EAAK;MAC9B,IAAI,CAACJ,aAAY,GAAI,CAAC,IAAI,CAACA,aAAY;IACzC,CAAC;IACDK,UAASA,CAAA,EAAK;MACZ,OAAOnC,IAAI,CACT;QACEqD,MAAM,EAAE,KAAK;QACbC,GAAG,EAAG,gCAA+B,IAAI,CAAC3C,EAAG;MAC/C,EACF,CACGwC,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACpC,IAAI,EAChCmC,IAAI,CAAChC,MAAK,IAAK;QACd,IAAI,CAACA,MAAK,GAAIA,MAAK;QACnB;QACA,IAAI,CAACU,YAAW,GAAI,IAAG;QACvB,MAAM0B,MAAK,GAAIjD,GAAG,CAACD,OAAO,EAAG,UAAS,IAAI,CAACM,EAAG,IAAG,IAAI,CAACQ,MAAM,CAACF,GAAI,EAAC;QAClEV,cAAc,CAACgD,MAAM,EAClBJ,IAAI,CAAEG,GAAG,IAAK;UACb,IAAI,CAACrC,GAAE,GAAIqC,GAAE;QACf,CAAC,EACAE,KAAK,CAAEC,KAAK,IAAKX,OAAO,CAACC,GAAG,CAACU,KAAK,CAAC;QACtC,MAAMC,SAAQ,GAAIpD,GAAG,CAACD,OAAO,EAAG,UAAS,IAAI,CAACM,EAAG,IAAG,IAAI,CAACQ,MAAM,CAACD,SAAU,EAAC;QAC3EX,cAAc,CAACmD,SAAS,EACrBP,IAAI,CAAEG,GAAG,IAAK;UACb,IAAI,CAACpC,SAAQ,GAAIoC,GAAE;QACrB,CAAC,EACAE,KAAK,CAAEC,KAAK,IAAKX,OAAO,CAACC,GAAG,CAACU,KAAK,CAAC;QACtC,IAAI,CAAC7B,UAAS,GAAI,IAAG;QACrB,OAAO5B,IAAI,CACT;UACEqD,MAAM,EAAE,KAAK;UACbC,GAAG,EAAG,qCAAoC,IAAI,CAACnC,MAAM,CAACC,QAAS;QACjE,EACF,CACG+B,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACpC,IAAI,EAChCmC,IAAI,CAAC3B,WAAU,IAAK;UACnB,IAAI,CAACA,WAAU,GAAIA,WAAU;QAC/B,CAAC,EACAgC,KAAK,CAAEG,GAAG,IAAKb,OAAO,CAACC,GAAG,CAACY,GAAG,CAAC;MACpC,CAAC,EACAH,KAAK,CAAEG,GAAG,IAAKb,OAAO,CAACC,GAAG,CAACY,GAAG,CAAC;IACpC,CAAC;IACDvB,gBAAeA,CAAA,EAAK,CACpB,CAAC;IACDwB,MAAKA,CAAA,EAAK;MACR,IAAI,CAAClC,SAAQ,GAAI,IAAG;IACtB,CAAC;IACDmC,OAAMA,CAAA,EAAK;MACT,IAAI,CAAClC,WAAU,GAAI,IAAG;IACxB,CAAC;IACDmC,MAAKA,CAAGC,IAAI,EAAE;MACZ,IAAI,CAACrC,SAAQ,GAAIqC,IAAG;IACtB,CAAC;IACDC,aAAYA,CAAGD,IAAI,EAAE;MACnB,IAAI,CAACpC,WAAU,GAAIoC,IAAG;IACxB;EACF,CAAC;EACDE,KAAK,EAAE,CACP;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}