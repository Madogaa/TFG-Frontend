{"ast":null,"code":"import http from 'axios';\nimport { storage } from '../vuefire/firebase';\nimport { getDownloadURL, uploadBytes, ref } from 'firebase/storage';\nexport default {\n  name: 'ModalVue',\n  props: {\n    user: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      grados: [],\n      select: {\n        idGrado: 0,\n        nombre: '',\n        asignaturaList: []\n      },\n      imagen: null,\n      descripcion: '',\n      showSelected: false,\n      selectedAsignatura: false\n    };\n  },\n  mounted() {\n    this.getGrados();\n  },\n  methods: {\n    selected(data) {\n      this.showSelected = true;\n    },\n    selectingAsignatura() {\n      this.selectedAsignatura = true;\n    },\n    clickImagen(e) {\n      this.imagen = e.target.files[0];\n      console.log(this.imagen);\n    },\n    subirImagen() {\n      const imgRef = ref(storage, `images/${this.user}/${this.imagen.name}`);\n      uploadBytes(imgRef, this.imagen).then(e => console.log(e)).then(e => console.log(e));\n    },\n    getImagen() {\n      const imgRef = ref(storage, `images/${this.user}/${this.imagen.name}`);\n      getDownloadURL(imgRef).then(url => {}).catch(error => {\n        switch (error.code) {\n          case 'storage/object-not-found':\n            break;\n          case 'storage/unauthorized':\n            break;\n          case 'storage/canceled':\n            break;\n          case 'storage/unknown':\n            break;\n        }\n      });\n    },\n    getGrados() {\n      return http({\n        method: 'GET',\n        url: 'http://localhost:8080/grados'\n      }).then(response => response.data).then(grados => {\n        this.grados = grados;\n      }).catch(err => console.log(err));\n    },\n    close() {\n      this.$emit('cierra', false);\n    }\n  }\n};","map":{"version":3,"names":["http","storage","getDownloadURL","uploadBytes","ref","name","props","user","type","String","required","data","grados","select","idGrado","nombre","asignaturaList","imagen","descripcion","showSelected","selectedAsignatura","mounted","getGrados","methods","selected","selectingAsignatura","clickImagen","e","target","files","console","log","subirImagen","imgRef","then","getImagen","url","catch","error","code","method","response","err","close","$emit"],"sources":["C:\\Users\\mario\\OneDrive\\Escritorio\\DotShare-TFG\\dotshare\\src\\views\\Modal.vue"],"sourcesContent":["<template>\r\n  <div class=\"modal show\" tabindex=\"-1\" role=\"dialog\">\r\n  <div class=\"modal-dialog\" role=\"document\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h5 class=\"modal-title\">Nueva Publicacion</h5>\r\n        <button @click=\"close\" type=\"button\" class=\"close\" aria-label=\"Close\">\r\n          <span aria-hidden=\"true\">&times;</span>\r\n        </button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <div class=\"form__input\">\r\n              <p>Descripcion: </p>\r\n              <textarea v-model=\"descripcion\" name=\"descripcion\" id=\"\" cols=\"30\" rows=\"3\"></textarea>\r\n        </div>\r\n        <div class=\"form__input-file\">\r\n              <p>Upload: </p>\r\n              <input type=\"file\" title=\"&nbsp;\" name=\"user\" id=\"\">\r\n          </div>\r\n        <select v-model=\"select\" v-on:change=\"selected\" class=\"form-select\" aria-label=\"Default select example\">\r\n          <option selected>Elije un grado</option>\r\n          <option v-for=\"grado in grados\" v-bind:key=\"grado.idGrado\" v-bind:value=\"{ idGrado: grado.idGrado, nombre: grado.nombre}\">{{ grado.nombre }}</option>\r\n        </select>\r\n        <select v-on:change=\"selectingAsignatura\" v-model=\"selectAsignatura\" v-if=\"showSelected\" class=\"form-select\" aria-label=\"Default select example\">\r\n          <option value=\"0\" selected>Elije Asignatura</option>\r\n          <option v-for=\"asignatura in  grados[select.idGrado-1].asignaturaList\" v-bind:key=\"asignatura.idAsignatura\" v-bind:value=\"{ idAsignatura: asignatura.idAsignatura, nombre: asignatura.nombre}\">{{ asignatura.nombre }}</option>\r\n        </select>\r\n        <form @submit.prevent=\"subirImagen\" enctype=\"multipart/form-data\">\r\n          <input @change=\"clickImagen($event)\" type=\"file\" accept=\"image/*\" />\r\n          <input type=\"submit\" />\r\n        </form>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-primary\">Save changes</button>\r\n        <button @click=\"close\" type=\"button\" class=\"btn btn-secondary\">Close</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport http from 'axios'\r\nimport { storage } from '../vuefire/firebase'\r\nimport { getDownloadURL, uploadBytes, ref } from 'firebase/storage'\r\n\r\nexport default {\r\n  name: 'ModalVue',\r\n  props: {\r\n    user: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      grados: [],\r\n      select: {\r\n        idGrado: 0,\r\n        nombre: '',\r\n        asignaturaList: []\r\n      },\r\n      imagen: null,\r\n      descripcion: '',\r\n      showSelected: false,\r\n      selectedAsignatura: false\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getGrados()\r\n  },\r\n  methods: {\r\n    selected (data) {\r\n      this.showSelected = true\r\n    },\r\n    selectingAsignatura () {\r\n      this.selectedAsignatura = true\r\n    },\r\n    clickImagen (e) {\r\n      this.imagen = e.target.files[0]\r\n      console.log(this.imagen)\r\n    },\r\n    subirImagen () {\r\n      const imgRef = ref(storage, `images/${this.user}/${this.imagen.name}`)\r\n\r\n      uploadBytes(imgRef, this.imagen).then(e => console.log(e))\r\n        .then(e => console.log(e))\r\n    },\r\n    getImagen () {\r\n      const imgRef = ref(storage, `images/${this.user}/${this.imagen.name}`)\r\n      getDownloadURL(imgRef)\r\n        .then((url) => {\r\n        })\r\n        .catch((error) => {\r\n          switch (error.code) {\r\n            case 'storage/object-not-found':\r\n              break\r\n            case 'storage/unauthorized':\r\n              break\r\n             case 'storage/canceled':\r\n              break\r\n            case 'storage/unknown':\r\n              break\r\n          }\r\n        })\r\n    },\r\n    getGrados () {\r\n      return http(\r\n        {\r\n          method: 'GET',\r\n          url: 'http://localhost:8080/grados'\r\n        }\r\n      )\r\n        .then((response) => response.data)\r\n        .then(grados => {\r\n          this.grados = grados\r\n        })\r\n        .catch((err) => console.log(err))\r\n    },\r\n    close () {\r\n      this.$emit('cierra', false)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.show{\r\n  display: block;\r\n}\r\n.form-select{\r\n  margin: 0 0 1em 0;\r\n}\r\n</style>\r\n"],"mappings":"AA0CA,OAAOA,IAAG,MAAO,OAAM;AACvB,SAASC,OAAM,QAAS,qBAAoB;AAC5C,SAASC,cAAc,EAAEC,WAAW,EAAEC,GAAE,QAAS,kBAAiB;AAElE,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,KAAK,EAAE;IACLC,IAAI,EAAE;MACJC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACZ;EACF,CAAC;EACDC,IAAGA,CAAA,EAAK;IACN,OAAO;MACLC,MAAM,EAAE,EAAE;MACVC,MAAM,EAAE;QACNC,OAAO,EAAE,CAAC;QACVC,MAAM,EAAE,EAAE;QACVC,cAAc,EAAE;MAClB,CAAC;MACDC,MAAM,EAAE,IAAI;MACZC,WAAW,EAAE,EAAE;MACfC,YAAY,EAAE,KAAK;MACnBC,kBAAkB,EAAE;IACtB;EACF,CAAC;EACDC,OAAMA,CAAA,EAAK;IACT,IAAI,CAACC,SAAS,EAAC;EACjB,CAAC;EACDC,OAAO,EAAE;IACPC,QAAOA,CAAGb,IAAI,EAAE;MACd,IAAI,CAACQ,YAAW,GAAI,IAAG;IACzB,CAAC;IACDM,mBAAkBA,CAAA,EAAK;MACrB,IAAI,CAACL,kBAAiB,GAAI,IAAG;IAC/B,CAAC;IACDM,WAAUA,CAAGC,CAAC,EAAE;MACd,IAAI,CAACV,MAAK,GAAIU,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC;MAC9BC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACd,MAAM;IACzB,CAAC;IACDe,WAAUA,CAAA,EAAK;MACb,MAAMC,MAAK,GAAI7B,GAAG,CAACH,OAAO,EAAG,UAAS,IAAI,CAACM,IAAK,IAAG,IAAI,CAACU,MAAM,CAACZ,IAAK,EAAC;MAErEF,WAAW,CAAC8B,MAAM,EAAE,IAAI,CAAChB,MAAM,CAAC,CAACiB,IAAI,CAACP,CAAA,IAAKG,OAAO,CAACC,GAAG,CAACJ,CAAC,CAAC,EACtDO,IAAI,CAACP,CAAA,IAAKG,OAAO,CAACC,GAAG,CAACJ,CAAC,CAAC;IAC7B,CAAC;IACDQ,SAAQA,CAAA,EAAK;MACX,MAAMF,MAAK,GAAI7B,GAAG,CAACH,OAAO,EAAG,UAAS,IAAI,CAACM,IAAK,IAAG,IAAI,CAACU,MAAM,CAACZ,IAAK,EAAC;MACrEH,cAAc,CAAC+B,MAAM,EAClBC,IAAI,CAAEE,GAAG,IAAK,CACf,CAAC,EACAC,KAAK,CAAEC,KAAK,IAAK;QAChB,QAAQA,KAAK,CAACC,IAAI;UAChB,KAAK,0BAA0B;YAC7B;UACF,KAAK,sBAAsB;YACzB;UACD,KAAK,kBAAkB;YACtB;UACF,KAAK,iBAAiB;YACpB;QAAI;MAEV,CAAC;IACL,CAAC;IACDjB,SAAQA,CAAA,EAAK;MACX,OAAOtB,IAAI,CACT;QACEwC,MAAM,EAAE,KAAK;QACbJ,GAAG,EAAE;MACP,EACF,CACGF,IAAI,CAAEO,QAAQ,IAAKA,QAAQ,CAAC9B,IAAI,EAChCuB,IAAI,CAACtB,MAAK,IAAK;QACd,IAAI,CAACA,MAAK,GAAIA,MAAK;MACrB,CAAC,EACAyB,KAAK,CAAEK,GAAG,IAAKZ,OAAO,CAACC,GAAG,CAACW,GAAG,CAAC;IACpC,CAAC;IACDC,KAAIA,CAAA,EAAK;MACP,IAAI,CAACC,KAAK,CAAC,QAAQ,EAAE,KAAK;IAC5B;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}